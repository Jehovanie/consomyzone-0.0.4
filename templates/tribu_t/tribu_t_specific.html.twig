{% extends 'base.html.twig' %}

{% block title %}

	tribu-T
	{{tribu.name_tribu_t_muable}}
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{asset('assets/css/account/account.css')}}">
	<link
	rel="stylesheet" href="{{asset('assets/css/account/actualite.css')}}">
	{# <link rel="stylesheet" href="{{asset('assets/css/account/agenda/agenda.css')}}"> #}
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css"/>
	<style>
		.content_right_actualite {
			top: -50px;
		}
	</style>
	<link rel="stylesheet" href="{{asset('assets/css/account/style.css')}}">
	<link rel="stylesheet" href="{{asset('assets/css/Tribu_T/publication.css')}}">

{% endblock %}

{% block javascripts %}
	<script src="{{ asset('assets/js/account/account.js') }}" defer></script>
	<script src="{{ asset('assets/js/agenda/agenda.js') }}" defer></script>
	{# <script src="{{ asset('assets/js/account/account_mobile.js') }}" defer></script> #}
	<script src="{{asset('assets/js/tribuT/myTribuT.js')}}" defer></script>
	<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js" defer></script>
	{# <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> #}

{% endblock %}
{% block body %}

	<div class="nh">
		{% include 'shard/account_navleft_new.html.twig' %}
		{% include 'shard/account_navbar_new.html.twig' %}
		<div class="fixed-top">
			<button class="responsif-none-pc vu jc g  pa nj xr ni bj wr _k uo qh btn-navright-tribut btn-navright-tribut-tomm-js">
				<span class="jc h cg bf sd span-btn-menu-tribut menu-tribut-tomm-js">
					<span class="du-block g m yd vc span-menu-tribut-tomm-js">
						<span class="">Menu tribu T</span>
					</span>
					<i class="fa-solid fa-xmark btn-ferme-tribut fermet-tribu-t-tomm-js responsif-none"></i>
				</span>
			</button>
		</div>


		<!-- ===== Main Content Start ===== -->
		<main class="gv hm hv content-actualite-connected">
			<div class="sk bu 2xl:ud-p-11 width-content-t">

				<div class="account listTribu_t_mobile content_right_actualite" id="container-mobile">
					<div id="content-pub-js" data-id={{tribu.id}} data-name={{tribu.nom_table_trbT}} data-cu={{app.user.id}}>
						<div class="card-couverture-pub-tribu-t ">
							<div class="content-couverture mt-3">
								<div class="row content-tribu-t">
									<div class="col-lg-3 col-4">
										<div class="row">
											<div class="col-lg-6 col-3">
												<img id="avatarTribuT" src="{{asset(tribu.logo_path)}}" alt="123">
											</div>
											{% if tribu.isFondateur %}
												<div class="col-lg-6 col-6" style="height:100px;">
													<label style="margin-left:50%;margin-top:50%" data-bs-placement="top" title="Modifier le logo de la tribu" data-bs-toggle="modal" data-bs-target="#addPictureModalTribu">
														<i class="bi bi-camera-fill" style="font-size: 20px; margin-top:5px;margin-left: 15px;cursor:pointer; background-position: 0px -130px; background-size: auto; width: 20px; height: 20px; background-repeat: no-repeat; display: inline-block;"></i>
													</label>
												</div>
											{% endif %}
										</div>
									</div>
									<div class="col-lg-8 col-8 content-tribu-t-name">
										<h1 class="titre-tribu-t" id="tribu_t_name_main_head" data-tribu={{tribu.nom_table_trbT}}>{{tribu.name_tribu_t_muable}}</h1>
										<p class="text-white descrp-tribu-t">
											{{tribu.description}}
										</p>
									</div>
								</div>

							</div>
							<div class="container-fluid" style="height: 30px; background-color: #1ABA12;">
								<p class="text-light">Tribu-t fondée par
									<span class="fw-bold">{{tribu.fondateurName}}</span>
								</p>
							</div>
							<nav class=" mx-auto">
								<ul id="navBarTribu" class="navBarTribu-t">
									<li class="listNavBarTribu">
										<a class="active" id="ulActualites" style="cursor:pointer;" onclick="showActualites()">Actualités</a>
									</li>
									{% if tribu.ext_restaurant %}
										<li class="listNavBarTribu restoNotHide">
											<a style="cursor:pointer;" data-value="restaurant">Restaurants</a>
										</li>
									{% endif %}

									{% if tribu.ext_golf %}
										<li class="listNavBarTribu golfNotHide">
											<a style="cursor:pointer;" class="" onclick="showGolf('{{tribu.nom_table_trbT}}')" data-value="golf">Mon Golf</a>
										</li>
									{% endif %}

									<li class="listNavBarTribu invitation">
										<a style="cursor:pointer;" onclick="showInvitations()">Invitations</a>
									</li>
									<li class="listNavBarTribu partisantT">
										<a style="cursor:pointer;">Partisans</a>
									</li>
									<li class="listNavBarTribu">
										<a style="cursor:pointer;" id="see-gallery">Photos</a>
									</li>

									{% if tribu.isFondateur %}
										<li class="listNavBarTribu">
											<a style="cursor:pointer;" id="settingTribuT" onclick="settingTribuT(event,'{{tribu.nom_table_trbT}}')">Paramètre</a>
										</li>
									{% endif %}

								</ul>
							</nav>
						</div>
						<!-- create publication-->
						<div id="tribu_t_conteuneur" class="exprime-pub">
							<div
								class="lc kg hg av vg au 2xl:ud-gap-7.5 yb ot 2xl:ud-mt-7.5 ">
								<!-- ====== Chart pub One Start -->
								<div class="2xl:ud-max-w-230 2xl:ud-max-w-230-tribu-t rh ni bj wr nj xr content-pub pub-t">
									<div class="head-pub">
										<div class="pdp-content">
											<img src="{{profil[0].photoProfil ? asset(profil[0].photoProfil) :asset('/uploads/users/photos/default_pdp.png') }}" alt="">
										</div>
										<div class="name-content-h">
											<div class="name-content">
												<p class="form-pub" data-bs-toggle="modal" data-bs-target="#modal_publication" data-bs-whatever="@mdo">Exprimez-vous...</p>
											</div>
										</div>
									</div>
								</div>
								<!-- ====== Chart pub One End -->
							</div>

						</div>

					</div>
				</div>

				<!-- ====== Chart Two Start -->

				<div class="apropos-tribu-t yd vf 2xl:ud-max-w-180 rh ni bj wr nj xr al  back-tribu-t apropos-tribu-t-tomm-js responsif-none" id="apropos-tribu-t">

					{% include "shard/account_navleft_tribuT.html.twig" %}
				</div>
				<!-- ====== Chart Two End -->
			</div>
		</main>
		<!-- ===== Main Content End ===== -->

	</div>
	{% include "tribu_t/modal_publication.html.twig" %}
	{% include 'tribu_t/modal_add_picture.twig' %}
	{% include 'shard/modal/media_modal_tribu.html.twig' %}

	<!-- Modal Créer tribuT -->
	<div class="modal fade ModalCreationTribuT" id="ModalCreationTribuT" tabindex="-1" aria-labelledby="creerTribuTModal" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title text-black" id="creerTribuTModal">
						Créer un nouveau tribu-T</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="mini-couvertur-tribu-t">
						<img src="{{asset('assets/image/mini-couverture.jpg')}}" alt="">
					</div>


					{{ form_start(form, {'method': 'POST'}) }}

					<label for="" class="label" id="uploadImage">
						{{ form_row(form.upload, {'attr': {'class': 'input','accept' : 'image/*'}}) }}
						<span class="label-uplaod-tribu-t"></span>
					</label>

					<div class="" style="margin-top: -70px;">
						{{ form_label(form.tribuTName , "Nom de la tribu", {'label_attr': {'class': 'jc un zn gs fb'}}) }}
						{{ form_widget(form.tribuTName, {'attr': {'class': 'yd nj qh ni bj jr fr ps zn gs il cm zr wr elie-border-black','placeholder': "Entrer ici le nom de la tribu"}}) }}

						{{ form_label(form.description , "Description de la tribu", {'label_attr': {'class': 'jc un zn gs fb'}}) }}
						{{ form_widget(form.description, {'attr': {'class': 'yd nj qh ni bj jr fr ps zn gs il cm zr wr elie-border-black', 'placeholder': "Entrer ici la description de la tribu"}}) }}

						<p class="text-choisir">Choisir une extension</p>

						<div class="form-check form-switch mt-6">
							{{ form_row(form.extension, {'attr': {'class': 'form-check-input mt-5', 'role': "switch"}})}}
						</div>
						<div class="form-check form-switch mt-50px">
							{{ form_row(form.extension_golf, {'attr': {'class': 'form-check-input mt-5', 'role': "switch"}})}}
						</div>

					</div>

					<center class="mt-3">
						<button class="btn-creer" type="submit">Créer</button>
					</center>

					{{form_end(form)}}

				</div>


			</div>
		</div>
	</div>


	<!-- Modal Update Info tribuT -->
	<div class="modal fade ModalUpdateTribuT" id="ModalUpdateTribuT" tabindex="-1" aria-labelledby="updateTribuTModal" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title text-black" id="updateTribuTModal">
						Modifier les informations de la tribu T</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="mini-couvertur-tribu-t">
						<img src="{{asset('assets/image/mini-couverture.jpg')}}" style="width: 468px;height: 160px;" alt="">
					</div>
					<div class="containerUpdateInfoT">
						<label for="" class="label" id="uploadImageForUpdate">
							<div class="mb-3">
								<input type="file" id="form_upload_update" name="form_upload_update" class="input form-control" accept="image/*">
							</div>
							<span class="label-uplaod-tribu-t"></span>
							<img class="img-update-tribu-t">
						</label>
						<div class="containerInfoTribuT">
							<label class="jc un zn gs fb form-label required mt-3" for="updateTribuTName">Modifier le nom de la tribu</label>
							<input type="text" id="updateTribuTName" name="update_name" required="required" class="yd nj qh ni bj jr fr ps zn gs il cm zr wr elie-border-black form-control" placeholder="Modifier le nom de la tribu">

							<label class="jc un zn gs fb form-label mt-3" for="update_description">Modifier la description de la tribu</label>
							<input type="text" id="update_description" name="update_description" class="yd nj qh ni bj jr fr ps zn gs il cm zr wr elie-border-black form-control" placeholder="Modifier la description de la tribu">

							<div class="form-check form-switch">
								<div class="mb-3">
									<div class="mt-3 text-black" style="margin-left: -10%;">Modifier l'extension</div>
									<div class="form-check">
										<input type="checkbox" id="update_form_restaurant" name="update_form_restaurant" class="form-check-input form-check-input" role="switch">
										<label for="form_extension">Restaurant</label>
									</div>
									<div class="form-check">
										<input type="checkbox" id="update_form_golf" name="update_form_golf" class="form-check-input form-check-input" role="switch">
										<label for="form_extension">Golf</label>
									</div>
								</div>
							</div>

						</div>

						<center class="mt-3">
							<button data-tbttbl="" class="btn btn-primary btn-update" id="updateTribuInfo" type="button" onclick="updateTribuTInfos(event)">Modifier</button>
						</center>
					</div>
				</div>
			</div>
		</div>
	</div>

	{% include 'shard/modal/alert_flash.html.twig' %}
	{% include 'shard/restaurant/modal_avis_resto.html.twig' %}
	{% include 'shard/modal/new_agenda_from_tribu_t.html.twig' %}
	<!-- End Modal -->

	<!-- Modal For Extension -->

		<div class="modal fade" id="modalForExtension" tabindex="-1" aria-labelledby="extModalLabel" aria-hidden="true"> <div class="modal-dialog modal-dialog-scrollable modal-xl">
			<div class="modal-content w-100 bg-white" style="max-width:100% !important; margin-left:0 !important;">
				<div class="modal-header">
					<h1 class="modal-title fs-5 text-primary" id="extModalLabel">Resultat de recherche restaurant</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div id="elie-restou"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="modalDetailResto" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-dialog-scrollable">
			<div class="modal-content w-100 bg-white" style="max-width:100% !important; margin-left:0 !important;">
				<div class="modal-header" id="restoModalLabel"></div>
				<div class="modal-body">
					<div id="elie-resto-detail"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fermer</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal" tabindex="-1" id="detailOptionResto">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Plus d'options</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="container text-center">
						<i class="fas fa-question-circle fs-1 text-info"></i><br>
						{# <p class="questionAction">Quelle action voulez-vous pour ce restaurant?</p>
																														<div class="container mb-4 mt-5 content_btns_nanta_js">
																															<button type="button" id="data-note-elie-js" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalAvisRestaurant"><i class="fas fa-edit"></i> Notez</button>
																															<button type="button" id="data-event-elie-js" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createAgendaFromTribuT"><i class="fas fa-calendar"></i> Créer un évènement</button>
																															<button type="button" id="data-depastille-nanta-js" class="btn btn-warning" onclick="pastilleRestoForTribuTDashboard(this,false)">Dépastiller</button> #}
						<p class="questionAction">Quelle action voulez-vous pour ce restaurant?</p>
						<div class="container mb-4 mt-5 content_btns_nanta_js">
							<button type="button" id="data-note-elie-js" class="btn btn-primary mt-1" data-bs-toggle="modal" data-bs-target="#modalAvisRestaurant">
								<i class="fas fa-edit"></i>
								Notez</button>
							<button type="button" id="data-event-elie-js" class="btn btn-primary mt-1" data-bs-toggle="modal" data-bs-target="#createAgendaFromTribuT">
								<i class="fas fa-calendar"></i>
								Créer un évènement</button>
							<button type="button" id="data-depastille-nanta-js" class="btn btn-warning mt-1" onclick="pastilleRestoForTribuTDashboard(this,false)">Dépastiller</button>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<div class="modal" tabindex="-1" id="detailOptionGolf">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Plus d'options</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="container text-center">
						<i class="fas fa-question-circle fs-1 text-info"></i><br>
						<p class="questionAction">Quelle action voulez-vous pour ce golf?</p>
						<div
							class="container mb-4 mt-5 content_btns_nanta_js">
							{# <button type="button" id="data-note-nanta-js" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalAvisRestaurant"><i class="fas fa-edit"></i> Notez</button> #}
							<button type="button" id="data-note-nanta-js" class="btn btn-secondary" disabled>
								<i class="fas fa-edit"></i>
								Notez</button>
							<button type="button" id="data-event-nanta-js" class="btn btn-secondary" disabled>
								<i class="fas fa-calendar"></i>
								Créer un évènement</button>
							<button type="button" id="data-depastilleGolf-nanta-js" class="btn btn-warning" onclick="depastilleGolf(this)">Dépastiller</button>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="detailEtabModal" aria-hidden="true" aria-labelledby="detailEtabModal_label" tabindex="-1">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div
					class="modal-header">
					{# <h5 class="modal-title">Détail</h5> #}
					<div class="content_etab_detail"></div>
					<button type="button" class="btn-close" data-bs-target="#modalForExtension" data-bs-toggle="modal" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body"></div>
				<div class="modal-footer">
					<button class="btn btn-danger" data-bs-target="#modalForExtension" data-bs-toggle="modal" data-bs-dismiss="modal">Fermer</button>
				</div>
			</div>
		</div>
	</div>

	<!-- End Modal -->
	{# <div class="main-search-resto">
						<div style="" class="elie-div-resto-search border border-dark">
							<div class="d-flex justify-content-between">
								<h6 class="text-primary m-2">Resultat de recherche restaurant</h6>
								<button class="border border-secondary pe-2 ps-2 me-2 rounded-1" onclick="closeModal()"><i class="fas fa-close text-danger fa-2x"></i></button>
							</div>
							<div id="elie-restou"></div>
						</div>
					</div> #}

	{% include 'shard/modal/commentaire.html.twig' %}


{% endblock %}
